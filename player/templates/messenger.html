{% load helpers %}

{% template 'chat' %}
<div class="chat <% active %>" id="chat-<% chatid %>" data-chatid="<% chatid %>" data-uid="<% uid %>">
    <div class="messages">

    </div>

    <div class="msg-row msg-form">
        <div class="name">
            <span class="user-name">
                {{ user.name }}
            </span>
            <span class="player-color player-<% uid %> char-name">
                {% if is_dm %}
                    DM
                {% elif char %}
                    {{ char.name }}
                {% endif %}
            </span>
        </div>
        <input data-id="<% chatid %>" class="msg-input" type="text" name="msg" placeholder="Say..." autocomplete="off">
    </div>
</div>
{% endtemplate %}

{% template 'chat-btn' %}
    <button class="player-color player-<% uid %> chat-btn btn btn-mini <% classes %>" data-chatid="<% chatid %>">
        <% name %>
    </button>
{% endtemplate %}

{% json '{"chatid": "campaign", "classes": "active btn-info", "name": "Campaign", "active": "active"}' as context %}
{% set_key context 'uid' user.id %}


<div class="chat-group">
    <div class="chat-sidebar chat-btns">
        {% render_template 'chat-btn' context %}
    </div>
    {% render_template 'chat' context %}
</div>



{% template 'message' %}
    <div class="row-fluid msg-row <% type %>" data-uid="<% uid %>">
        <span class="prefix">
            <span class="name"><% name %></span>:
        </span>
        <span class="msg"><% msg %><br/></span>
    </div>
{% endtemplate %}




